import { motion } from "framer-motion";
import { useEffect, useState } from "react";
import styled from "styled-components";
import { COLORS } from "../../styles/colors";

export const Technologies = () => {
  const [icon, setIcon] = useState({
    hidden: {
      opacity: 0,
      pathLength: 0,
      fill: "rgba(255, 255, 255, 0)",
    },
    visible: {
      opacity: 0,
      pathLength: 0,
      fill: COLORS.white,
    },
  });

  const handleScroll = () => {
    const winScroll =
      document.body.scrollTop || document.documentElement.scrollTop;

    const height =
      document.documentElement.scrollHeight -
      document.documentElement.clientHeight;

    const scrolled = winScroll / height;

    setIcon(
      scrolled >= 0.6
        ? {
            hidden: {
              opacity: 0,
              pathLength: 0,
              fill: "rgba(255, 255, 255, 0)",
            },
            visible: {
              opacity: 1,
              pathLength: 1,
              fill: COLORS.white,
            },
          }
        : {
            hidden: {
              opacity: 0,
              pathLength: 0,
              fill: "rgba(255, 255, 255, 0)",
            },
            visible: {
              opacity: 0,
              pathLength: 0,
              fill: COLORS.white,
            },
          }
    );
  };

  useEffect(() => {
    window.addEventListener("scroll", handleScroll, { passive: true });

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  const transition = {
    default: { duration: 2, ease: "easeInOut" },
    fill: { duration: 2, ease: [1, 0.4, 0.6, 1] },
  };

  const style = { stroke: COLORS.typescript, strokeWidth: 0.5 };

  return (
    <Container>
      <Content>
        <Animation>
          <TypeScript>
            <motion.svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 32 32"
              className="item"
            >
              <motion.path
                d="M23.827 8.24303C24.6783 8.44107 25.4518 8.88682 26.05 9.52403C26.3795 9.8689 26.6656 10.2527 26.902 10.667C26.913 10.712 25.368 11.75 24.431 12.329C24.397 12.352 24.262 12.205 24.109 11.979C23.9378 11.6848 23.6949 11.4388 23.4028 11.2639C23.1108 11.089 22.7792 10.991 22.439 10.979C21.362 10.905 20.668 11.469 20.673 12.412C20.6637 12.6437 20.7165 12.8737 20.826 13.078C21.063 13.568 21.503 13.862 22.885 14.461C25.429 15.556 26.521 16.278 27.195 17.304C27.576 17.9523 27.8106 18.676 27.8825 19.4245C27.9543 20.173 27.8617 20.9281 27.611 21.637C27.2665 22.4145 26.7202 23.0855 26.0287 23.5805C25.3373 24.0755 24.526 24.3764 23.679 24.452C22.7787 24.5553 21.869 24.5459 20.971 24.424C19.5955 24.198 18.3284 23.5378 17.355 22.54C16.9872 22.1259 16.6758 21.6649 16.429 21.169C16.5328 21.0918 16.6421 21.0223 16.756 20.961C16.914 20.871 17.512 20.527 18.076 20.2L19.1 19.6L19.314 19.912C19.6744 20.4275 20.1332 20.8666 20.664 21.204C21.2 21.498 21.8072 21.6374 22.4178 21.6065C23.0284 21.5756 23.6184 21.3757 24.122 21.029C24.3818 20.7758 24.5442 20.4393 24.5807 20.0784C24.6173 19.7175 24.5257 19.3552 24.322 19.055C24.046 18.66 23.482 18.328 21.879 17.633C20.6221 17.2092 19.4772 16.5067 18.53 15.578C18.0789 15.064 17.7458 14.4575 17.554 13.801C17.4122 13.0532 17.3912 12.2875 17.492 11.533C17.6802 10.6649 18.1307 9.87555 18.7825 9.27203C19.4344 8.6685 20.256 8.27996 21.136 8.15903C22.0321 8.05195 22.9393 8.08027 23.827 8.24303ZM15.484 9.72603L15.495 11.18H10.865V24.328H7.60001V11.183H2.97001V9.75503C2.95769 9.266 2.97105 8.77666 3.01001 8.28903C3.02701 8.26603 5.84201 8.25503 9.25501 8.26103L15.466 8.27803L15.484 9.72603Z"
                variants={icon}
                initial="hidden"
                animate="visible"
                style={style}
                transition={transition}
              />
            </motion.svg>
          </TypeScript>
          <div>
            <motion.svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 32 32"
              className="item"
            >
              <motion.path
                d="M25.6663 11.295C25.3467 11.1858 25.0248 11.0841 24.7006 10.99C24.7544 10.7713 24.804 10.5513 24.8494 10.33C25.5806 6.77376 25.1025 3.90876 23.4706 2.96564C21.9082 2.06063 19.3456 3.00376 16.7606 5.25876C16.5064 5.48126 16.2575 5.71043 16.0137 5.94626C15.8512 5.7896 15.6846 5.63627 15.5137 5.48626C12.8044 3.07501 10.0887 2.05939 8.45875 3.00564C6.89625 3.91251 6.43187 6.60564 7.09 9.97626C7.15584 10.3096 7.22979 10.6415 7.31187 10.9718C6.93836 11.0778 6.56799 11.1944 6.20125 11.3218C3.02875 12.4312 1 14.1706 1 15.9744C1 17.8381 3.1775 19.7068 6.48562 20.84C6.75396 20.9313 7.0248 21.0161 7.29813 21.0944C7.20937 21.4482 7.13083 21.8058 7.0625 22.1675C6.4375 25.48 6.925 28.1094 8.48437 29.0106C10.095 29.9413 12.7969 28.985 15.4307 26.6788C15.639 26.4963 15.8473 26.3035 16.0557 26.1007C16.319 26.3552 16.5898 26.6023 16.8682 26.8418C19.4181 29.0406 21.9363 29.9287 23.4932 29.025C25.1025 28.0912 25.6256 25.2663 24.9463 21.8294C24.8942 21.5669 24.8342 21.299 24.7662 21.0256C24.9562 20.9693 25.1423 20.9112 25.3244 20.8513C28.7618 19.7094 31.0012 17.8632 31.0012 15.9763C31 14.1638 28.9062 12.4131 25.6663 11.295ZM17.6038 6.22751C19.8181 4.29563 21.8881 3.53314 22.8319 4.07813C23.8362 4.65876 24.2269 7.00001 23.5956 10.0707C23.554 10.2706 23.509 10.47 23.4607 10.6687C22.1391 10.3682 20.7991 10.156 19.4493 10.0338C18.6766 8.92056 17.8295 7.86085 16.9138 6.86188C17.1379 6.64438 17.3675 6.43293 17.6025 6.22751H17.6038ZM9.85813 17.5156C10.1294 18.0407 10.4129 18.5592 10.7088 19.0712C11.01 19.5937 11.3239 20.1085 11.6506 20.6157C10.7219 20.5147 9.79903 20.3659 8.88562 20.17C9.15063 19.3125 9.47688 18.4219 9.85813 17.5156ZM9.85813 14.495C9.48312 13.6082 9.16562 12.7356 8.905 11.8932C9.76125 11.7013 10.6738 11.5444 11.625 11.4256C11.3062 11.9231 10.9996 12.4279 10.705 12.94C10.4104 13.4521 10.1275 13.9704 9.85625 14.495H9.85813ZM10.5393 16.0057C10.9344 15.1819 11.3598 14.374 11.8157 13.5819C12.271 12.7902 12.7559 12.0167 13.27 11.2612C14.1625 11.1937 15.0775 11.1582 16.0019 11.1582C16.9262 11.1582 17.8469 11.1937 18.7388 11.2619C19.2475 12.0156 19.7294 12.7865 20.1843 13.5744C20.6394 14.3623 21.0704 15.1664 21.4775 15.9869C21.0759 16.8135 20.6459 17.6248 20.1875 18.4207C19.7329 19.2123 19.2538 19.9882 18.75 20.7481C17.8594 20.8106 16.9375 20.845 16 20.845C15.0625 20.845 14.1581 20.8156 13.2838 20.7588C12.7658 20.0008 12.2771 19.224 11.8175 18.4281C11.3579 17.6323 10.9313 16.8248 10.5375 16.0057H10.5393ZM21.2969 19.0625C21.599 18.5383 21.889 18.0073 22.1669 17.4694C22.5479 18.3332 22.8841 19.216 23.1744 20.1144C22.2502 20.3225 21.3159 20.4821 20.375 20.5925C20.6925 20.0888 20.9998 19.5787 21.2969 19.0625ZM22.1543 14.4956C21.8777 13.9685 21.59 13.4478 21.2912 12.9332C20.9996 12.4256 20.6957 11.9244 20.3793 11.4294C21.3362 11.5506 22.2544 11.7119 23.115 11.9088C22.8383 12.7866 22.5177 13.65 22.1543 14.4956ZM16.0144 7.78001C16.6385 8.46194 17.2277 9.17494 17.78 9.91626C16.5988 9.86001 15.4166 9.86001 14.2337 9.91626C14.8169 9.14501 15.4138 8.42939 16.0144 7.78001ZM9.10375 4.11627C10.1075 3.53377 12.3269 4.36626 14.6662 6.44564C14.8156 6.57876 14.9663 6.71813 15.1162 6.86251C14.1959 7.86134 13.3427 8.92012 12.5625 10.0319C11.2158 10.1533 9.87838 10.3619 8.55875 10.6569C8.4825 10.3502 8.41375 10.0415 8.3525 9.73063C7.78687 6.84126 8.16125 4.66314 9.10375 4.11627ZM7.64063 19.8569C7.39063 19.7856 7.14375 19.7083 6.89999 19.625C5.4375 19.125 4.22938 18.4726 3.4 17.7619C2.6575 17.125 2.28125 16.4893 2.28125 15.9744C2.28125 14.88 3.91 13.4837 6.62625 12.5369C6.9675 12.4181 7.31166 12.3096 7.65875 12.2113C8.06215 13.5077 8.55072 14.7761 9.12125 16.0082C8.54392 17.2572 8.04931 18.5429 7.64063 19.8569ZM14.5862 25.7112C13.4219 26.7312 12.2556 27.4544 11.2275 27.8187C10.3037 28.1456 9.56813 28.155 9.12375 27.8981C8.1775 27.3513 7.78375 25.2394 8.32063 22.4069C8.38438 22.0735 8.45729 21.7402 8.53938 21.4069C9.87221 21.694 11.2231 21.8901 12.5825 21.9937C13.3703 23.1114 14.2306 24.1761 15.1575 25.1812C14.9712 25.3644 14.7806 25.5407 14.5862 25.7112ZM16.05 24.26C15.4425 23.6031 14.8363 22.8762 14.245 22.095C14.8196 22.1175 15.4046 22.1288 16 22.1288C16.6113 22.1288 17.2163 22.1156 17.8125 22.0888C17.2623 22.8419 16.674 23.5666 16.05 24.26ZM23.8325 26.0469C23.6538 27.0119 23.2944 27.6557 22.85 27.9131C21.9044 28.4619 19.8825 27.7488 17.7025 25.8681C17.4525 25.6532 17.2025 25.4225 16.9482 25.1806C17.8571 24.1715 18.697 23.1025 19.4625 21.9806C20.8295 21.8648 22.1868 21.655 23.525 21.3526C23.5863 21.6 23.6404 21.8425 23.6875 22.08C23.9882 23.5987 24.0312 24.9725 23.8325 26.0469ZM24.92 19.6319C24.7563 19.6863 24.5875 19.7387 24.4163 19.79C23.9966 18.4875 23.489 17.2149 22.8969 15.9812C23.4668 14.764 23.9546 13.51 24.3569 12.2275C24.6638 12.3169 24.9619 12.4106 25.2488 12.51C28.025 13.4675 29.7188 14.885 29.7188 15.9744C29.7188 17.1369 27.8894 18.6457 24.92 19.6319Z"
                fill="#215EA7"
                variants={icon}
                initial="hidden"
                animate="visible"
                style={style}
                transition={transition}
              />

              <motion.path
                d="M16 18.6594C16.5319 18.6611 17.0523 18.505 17.4955 18.2107C17.9386 17.9164 18.2844 17.4974 18.4891 17.0064C18.6939 16.5155 18.7484 15.9749 18.6457 15.4529C18.543 14.9311 18.2877 14.4514 17.9121 14.0747C17.5367 13.6979 17.0579 13.4411 16.5362 13.3367C16.0147 13.2323 15.4739 13.285 14.9824 13.4881C14.4907 13.6913 14.0705 14.0358 13.7748 14.4779C13.4791 14.9201 13.3212 15.44 13.3212 15.9719C13.3205 16.3243 13.3892 16.6734 13.5235 16.9992C13.6577 17.325 13.8549 17.6212 14.1037 17.8708C14.3524 18.1204 14.648 18.3185 14.9733 18.4538C15.2988 18.5891 15.6476 18.659 16 18.6594Z"
                fill="#215EA7"
                variants={icon}
                initial="hidden"
                animate="visible"
                style={style}
                transition={transition}
              />
            </motion.svg>
          </div>
          <JavaScript>
            <motion.svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 32 32"
              className="item"
            >
              <motion.path
                d="M6.96875 4.19998H12.2875V19.1125C12.2875 25.8375 9.06875 28.1812 3.91875 28.1812C2.6625 28.1812 1.05 27.9687 0 27.6187L0.59375 23.3125C1.33125 23.5562 2.275 23.7312 3.325 23.7312C5.56875 23.7312 6.96875 22.7125 6.96875 19.075V4.19998ZM16.9125 22.3375C18.3125 23.075 20.5562 23.8062 22.8312 23.8062C25.2812 23.8062 26.575 22.7937 26.575 21.2187C26.575 19.7812 25.4562 18.9062 22.6187 17.925C18.7 16.525 16.1063 14.3562 16.1063 10.8875C16.1063 6.86247 19.5 3.81873 25.0312 3.81873C27.725 3.81873 29.65 4.34373 31.05 5.00623L29.8625 9.28122C28.95 8.82497 27.2375 8.16247 24.9625 8.16247C22.65 8.16247 21.5312 9.24997 21.5312 10.4375C21.5312 11.9437 22.825 12.6062 25.9062 13.8C30.075 15.3375 32 17.5125 32 20.875C32 24.8312 28.9875 28.1937 22.5125 28.1937C19.8188 28.1937 17.1562 27.4562 15.825 26.725L16.9125 22.3375Z"
                variants={icon}
                initial="hidden"
                animate="visible"
                style={{ stroke: COLORS.javascript, strokeWidth: 1 }}
                transition={transition}
              />
            </motion.svg>
          </JavaScript>
        </Animation>
      </Content>
    </Container>
  );
};
const Container = styled.div`
  width: 100%;
  padding: 0 2%;
  height: 300px;
  margin-top: 60px;

  @media (max-width: 768px) {
    top: -400px;
    position: relative;
  }
`;

const Content = styled.div`
  width: 100%;
  display: flex;
  max-width: 1230px;
  margin: 0 auto;
  position: relative;

  a {
    font-size: 20px;
    line-height: 31px;
    color: ${COLORS.gray};
  }
`;

const Animation = styled.div`
  width: 100%;

  display: flex;
  justify-content: center;
  align-items: center;

  gap: 60px;

  @media (max-width: 768px) {
    flex-direction: column;
    gap: 60px;
    position: relative;
    top: -50px;
  }

  > div {
    width: 150px;
    height: 150px;
  }

  svg {
    overflow: visible;
    stroke-linejoin: round;
    stroke-linecap: round;
  }
`;

export const TypeScript = styled.div`
  width: 150px;
  height: 150px;
  svg {
    width: 150px;
    height: 150px;
    position: relative;
    top: 30px;
  }

  @media (max-width: 768px) {
    display: flex;
    justify-content: center;
    svg {
      width: 65px;
      height: 65px;
      top: 130px;
    }
  }
`;
export const JavaScript = styled.div`
  width: 150px;
  height: 150px;
  svg {
    width: 105px;
    height: 105px;
    position: relative;
    top: 53px;
  }

  @media (max-width: 768px) {
    top: 0px;
    display: flex;
    justify-content: center;
    svg {
      top: -40px;
      width: 50px;
      height: 50px;
    }
  }
`;
